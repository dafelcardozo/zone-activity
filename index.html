<!DOCTYPE html>
<html ng-app="dataApp" ng-controller="dataCtrl">
<head>
<meta charset="UTF-8">
<title>thank you for seeing this demo</title>
<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" media="screen" title="no title" charset="utf-8">
<link rel="stylesheet" href="bower_components/angular-chart.js/dist/angular-chart.css" media="screen" title="no title" charset="utf-8">
<script src="bower_components/jquery/dist/jquery.js" charset="utf-8"></script>
<script src="bower_components/angular/angular.js" charset="utf-8"></script>
<script src="bower_components/Chart.js/Chart.js" charset="utf-8"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.js" charset="utf-8"></script>
<script src="bower_components/angular-chart.js/angular-chart.js" charset="utf-8"></script>
</head>

<body>
Speed zones:
<canvas id="line" class="chart chart-line" chart-data="data" chart-labels="moments"
chart-series="labels" chart-options="options" chart-dataset-override="datasetOverride" chart-click="onClick">

</canvas>
Count by zones:
<canvas id="bar" class="chart chart-bar"
  chart-data="counts" chart-labels="labels" chart-series="labels" >
</canvas>
Speed average:
<canvas id="doughnut" class="chart chart-doughnut"
  chart-data="speeds" chart-labels="labels">
</canvas>
<script type="text/javascript">

var app = angular.module('dataApp', ["chart.js"]);
app.controller('dataCtrl', function ($scope,  $timeout,  $interval) {
  $scope.initialData = [
   {"zoneId":"Calle 85", "data":{"count":1,"speed":10,"time":1466781876681}},
   {"zoneId":"Salitre plaza", "data":{"count":2,"speed":8.5,"time":1466781876681}},
   {"zoneId":"Parque 93", "data":{"count":4,"speed":15,"time":1466781876681}},
   {"zoneId":"Calle 80", "data":{"count":3,"speed":13.5,"time":1466781876681}},
   {"zoneId":"Centro", "data":{"count":1,"speed": 9 ,"time":1466781876681}}
  ];

  $scope.labels = $scope.initialData.map(d => d.zoneId); //['2006', '2007', '2008', '2009', '2010', '2011', '2012'];
  $scope.series = ['Count by zones'];
  $scope.counts = [$scope.initialData.map(d => d.data.count)];

$scope.speeds = $scope.initialData.map(d => d.data.speed);

$scope.moments = ["10:00 am", "11:00 am", "12:00 pm", "1 pm", "2 pm"];




  $scope.data = [
    [10, 20, 15, 16, 30],
    [13, 18, 14, 17, 26],
    [16, 17, 8, 26, 20],
    [20, 12, 15, 22, 19],
    [9, 15, 16, 18, 17],
  ];

  $scope.onClick = function (points, evt) {
     console.log(points, evt);
   };
   $scope.datasetOverride = [{ yAxisID: 'y-axis-1' }, { yAxisID: 'y-axis-2' }];
   $scope.options = {
     /*
     scales: {
       yAxes: [
         {
           id: 'y-axis-1',
           type: 'linear',
           display: true,
           position: 'left'
         },
         {
           id: 'y-axis-2',
           type: 'linear',
           display: true,
           position: 'right'
         }
       ]
     }
     */
   };

  // $interval(function() {
  //    $scope.labels.push("2013");
  //    $scope.data[0].push(4);
  //  }, 3000);
});
</script>
</body>
</html>
